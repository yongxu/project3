<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/pixi/bin/pixi.js"></script>
<polymer-element name="pixi-element" constructor="PixiElement" attributes="width height">
  <template>
    <canvas id="view">    
    </canvas>
  </template>
  <script>
    Polymer({
      width:800,
      height:600,
      publish: {
        backgroundColor:0xFFFFFF,
        transparent:false,
        antialias:false,
        preserveDrawingBuffer:false,
        resolution:1,
        setup:function(){},
        draw:function(){}
      },
      ready:function(){
        // create an new instance of a pixi stage
        this.stage = new PIXI.Stage(0x66FF99);

        // create a renderer instance.
        this.renderer = PIXI.autoDetectRenderer(this.width, this.height,{view:this.$.view,
                                                                        transparent,
                                                                        antialias,
                                                                        preserveDrawingBuffer,
                                                                        resolution});
        setup(stage);
        requestAnimFrame( animate );

        function animate() {

          requestAnimFrame( animate );

          // render the stage
          draw(stage);
          renderer.render(stage);
        }
      }
    });
  </script>
</polymer-element>
