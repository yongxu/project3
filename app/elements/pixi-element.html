<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/pixi/bin/pixi.dev.js"></script>
<script src="../src/skulpt-async.js"></script>
<script src="../src/skulpt-keyboard.js"></script>
<script src="../src/skulpt-utils.js"></script>
<script src="../src/tile.js"></script>

<polymer-element name="pixi-element" constructor="PixiElement" attributes="width height">
  <template>
    <canvas id="view">
    </canvas>
  </template>
  <script>
    Polymer({
      publish: {
        width:1280,
        height:720,
        backgroundColor:0xFFFFFF,
        transparent:false,
        antialias:true,
        preserveDrawingBuffer:false,
        resolution:1,
        tileSize :32,
        gridWidth :21,
        gridHeight :21
      },
      resize:function(width,height){
          this.width=width;
          this.height=height;
          this.tiles.resizeCanvas(width,height);
      },
      ready:function(){

        var tiles=this.tiles=tile(this.$.view,{
          width:this.width ,
          height:this.height,
          backgroundColor:0xFFFFFF,
          transparent:false,
          antialias:true,
          preserveDrawingBuffer:false,
          resolution:1,
          tileSize :null,
          gridWidth :21,
          gridHeight :21,
          canvasBackground:"../assets/grass1.png",
          background:"../assets/dirt0.png",
          spritesUrl:{
            'wall':"../assets/crystal_wall02.png",
            'teapot': "../assets/magic_lamp.png",
            'gold pile': "../assets/gold_pile.png",
            'apple': "../assets/apple.png",
            'coin': "../assets/hud_coins.png",
            'blue gem': "../assets/hud_gem_blue.png",
            'red gem': "../assets/hud_gem_red.png",
            'yellow gem': "../assets/hud_gem_yellow.png",
            'dragon': "../assets/swamp_dragon.png",
            'draco green': "../assets/draco-base-green.png",
            'draco black': "../assets/draco-base-black.png",
            'cloud fire':"../assets/cloud_fire.png",
            'player' : "../assets/ancient_lich.png"
          }
        });
        this.resetCanvas=tiles.resetCanvas;
        this.resizeCanvas=tiles.resizeCanvas;

        // window.onresize=function(){
        //   tiles.resizeCanvas(window.innerHeight*1.25,window.innerHeight);
        // };
      }
    });
  </script>
</polymer-element>
