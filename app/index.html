<!DOCTYPE html>
<html>

<head>
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
    <script src="../lib/skulpt.js"></script>
    <script src="../lib/skulpt-stdlib.js"></script>


    <link rel="import" href="elements/pixi-element.html">
    <link rel="import" href="elements/python-element.html">
    <link href="../bower_components/core-scaffold/core-scaffold.html" rel="import">
    <link href="../bower_components/core-animated-pages/core-animated-pages.html" rel="import">
    <link href="../bower_components/core-icon/core-icon.html" rel="import">
    <link href="../bower_components/core-icons/core-icons.html" rel="import">
    <link href="../bower_components/core-ajax/core-ajax.html" rel="import">
    <link href="../bower_components/paper-button/paper-button.html" rel="import">
    <link href="../bower_components/paper-fab/paper-fab.html" rel="import">


    <link rel="import" href="../bower_components/core-header-panel/core-header-panel.html">
    <link rel="import" href="../bower_components/core-menu/core-menu.html">
    <link rel="import" href="../bower_components/core-item/core-item.html">
</head>

<body unresolved>

    <core-scaffold responsiveWidth="1000px" drawerWidth="150px">

    <core-animated-pages onclick="stuff();" transitions="cross-fade-all">
        <section>
            <div layout vertical center center-justified style="background:red;">
                <div>1</div>
            </div>
        </section>
        <section>
            <div layout vertical center center-justified style="background:blue;">
                <div>2</div>
            </div>
        </section>
    </core-animated-pages>

        <core-header-panel navigation flex mode="seamed">
            <core-toolbar style="background-color: #526E9C; color: #fff;">
                <span flex>Title</span>
            </core-toolbar>
            <core-menu>
                <core-item icon="settings" label="game"></core-item>
                <core-item icon="settings" label="code"></core-item>
            </core-menu>
        </core-header-panel>

        <div flex>
            <paper-fab id="run_top" style="position: absolute; top:10px; left:10px; color: #fff;" icon="arrow-forward" title="run" role="button" aria-label="arrow-forward"></paper-fab>
            <pixi-element flex></pixi-element>
        </div>

        <div vertical layout flex>
            <textarea id="code" rows="40">
                loading.........
            </textarea>
            <paper-button raised id="run">
                <core-icon icon="favorite"></core-icon>
                execute
            </paper-button>
        </div>
    </core-scaffold>

    <python-element flex></python-element>
    <core-ajax auto="" url="code/code.py" handleas="text" hidden=""></core-ajax>

    <script type="text/javascript">
    window.addEventListener('polymer-ready', function(e) {
        var ajax = document.querySelector("core-ajax");
        ajax.addEventListener("core-response", function(e) {
            document.querySelector('#code').value = e.detail.response;
        });
        var runGame= function(event) {
            document.querySelector('pixi-element').resetCanvas();
            var py = document.querySelector('python-element');
            py.run(document.querySelector('#code').value);
        };
        document.querySelector('#run').addEventListener("click",runGame);
        document.querySelector('#run_top').addEventListener("click",runGame);

    });
    </script>
</body>

</html>
