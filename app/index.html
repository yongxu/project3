<!DOCTYPE html>
<html>

<head>
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
    <script src="../lib/skulpt.js"></script>
    <script src="../lib/skulpt-stdlib.js"></script>
    <link rel="import" href="elements/pixi-element.html">
    <link rel="import" href="elements/python-element.html">
    <link href="bower_components/core-icon/core-icon.html" rel="import">
    <link href="bower_components/core-icons/core-icons.html" rel="import">
    <link href="bower_components/core-ajax/core-ajax.html" rel="import">
    <link href="bower_components/paper-button/paper-button.html" rel="import">
</head>

<body fullbleed unresolved>

    <div>
        <pixi-element flex></pixi-element>
    </div>

    <div vertical layout flex>
        <textarea id="code" rows="40">
            loading.........
        </textarea>
        <paper-button raised id="run">
            <core-icon icon="favorite"></core-icon>
            execute
        </paper-button>
        <python-element flex></python-element>
    </div>
    <core-ajax auto="" url="code/code.py" handleas="text" hidden=""></core-ajax>
    <script type="text/javascript">
    window.addEventListener('polymer-ready', function(e) {
        var ajax = document.querySelector("core-ajax");
        ajax.addEventListener("core-response", function(e) {
            document.querySelector('#code').value = e.detail.response;
        });
        document.querySelector('#run').addEventListener("click", function(event) {
            document.querySelector('pixi-element').resetCanvas();
            var py = document.querySelector('python-element');
            py.run(document.querySelector('#code').value);
        });

    });
    </script>
</body>

</html>
